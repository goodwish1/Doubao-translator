<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>LinguistAI</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div id="app-root">
    <header class="header">
      <div class="header-left">
        <img src="logo.png" class="app-logo" alt="Logo">
        <span class="app-name">LinguistAI</span>
      </div>
      <div class="header-right">
        <button id="btn-settings" class="icon-btn" title="设置">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
        </button>
        <div class="divider"></div>
        <div class="window-controls">
          <button id="btn-min" class="win-btn" title="最小化">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
          </button>
          <button id="btn-max" class="win-btn" title="最大化">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect></svg>
          </button>
          <button id="btn-close-win" class="win-btn close" title="关闭">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
          </button>
        </div>
      </div>
    </header>

    <main class="main-container">
      <div class="translation-grid">
        <div class="clean-card source-card" id="sourceCard">
          <div class="card-header">
            <div class="header-badge"><div class="dot"></div><span>源文件 / 文本</span></div>
            <button id="btn-upload" class="icon-btn small" title="上传文件">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/></svg>
            </button>
          </div>
          <textarea id="sourceInput" spellcheck="false" placeholder="直接拖入图片 / PDF / Word，或在此粘贴文本..."></textarea>
          
          <div id="drag-overlay" class="drag-overlay">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
            <span>松手识别翻译</span>
          </div>

          <div class="card-footer">
            <span id="char-count" class="char-info">0 字符</span>
            <div class="action-group">
              <div class="custom-dropdown" id="customDropdown">
                <div class="dropdown-trigger" id="dropdownTrigger">
                  <span id="currentLang" class="value">中文</span>
                  <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
                </div>
                <div class="dropdown-menu" id="dropdownMenu">
                  <div class="dropdown-item selected" data-value="Chinese">中文</div>
                  <div class="dropdown-item" data-value="English">English</div>
                  <div class="dropdown-item" data-value="Japanese">日本語</div>
                  <div class="dropdown-item" data-value="Korean">한국어</div>
                  <div class="dropdown-item" data-value="French">Français</div>
                  <div class="dropdown-item" data-value="German">Deutsch</div>
                  <div class="dropdown-item" data-value="Spanish">Español</div>
                  <div class="dropdown-item" data-value="Italian">Italiano</div>
                </div>
              </div>
              <select id="langSelect" style="display:none">
                <option value="Chinese" selected>Chinese</option>
                <option value="English">English</option>
                <option value="Japanese">Japanese</option>
                <option value="Korean">Korean</option>
                <option value="French">French</option>
                <option value="German">German</option>
                <option value="Spanish">Spanish</option>
                <option value="Italian">Italian</option>
              </select>
              <button id="btn-trans" class="primary-btn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12.87 15.07l-2.54-2.51.03-.03A17.52 17.52 0 0014.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.09-.02M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>
                <span>即刻翻译</span>
              </button>
            </div>
          </div>
        </div>
        
        <div class="clean-card target-card">
          <div class="card-header">
            <div class="header-badge"><div class="dot"></div><span>目标译文</span></div>
            <button id="btn-copy-result" class="icon-btn small" title="复制">
               <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>
            </button>
          </div>
          <div class="output-container">
            <div id="targetOutput" class="output-text placeholder"></div>
          </div>
          <div class="card-footer" style="border:none;"></div>
        </div>
      </div>
      
      <div class="history-section">
        <div class="history-title-bar">
          <span class="history-label">最近记录</span>
          <button id="btn-clear-history" class="text-btn-small">清空</button>
        </div>
        <div class="history-grid" id="history-grid"></div>
      </div>
    </main>

    <footer class="app-footer">
      <div class="footer-capsule" id="footer-capsule">
        <div class="footer-progress" id="footer-progress"></div>
        <span class="footer-text">LINGUISTAI · DESIGN BY J.CHIEN</span>
      </div>
    </footer>
  </div>

  <div id="settingsModal" class="modal">
    <div class="modal-content clean-card settings-card">
      <div class="modal-header">
        <h3>引擎参数设置</h3>
        <button id="btn-cancel-settings" class="close-btn">&times;</button>
      </div>
      
      <div class="settings-body">
        
        <div class="settings-columns">
          
          <div class="engine-group">
            <div class="group-header">
              <div class="group-title">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
                文本翻译 (Word/Txt)
              </div>
            </div>
            <div class="form-item">
              <label>API 地址</label>
              <input type="text" class="form-input" id="inputTextUrl" spellcheck="false" placeholder="https://ark.cn-beijing.volces.com/api/v3/chat/completions">
            </div>
            <div class="form-item">
              <label>API Key</label>
              <input type="password" class="form-input" id="inputTextKey" spellcheck="false" placeholder="sk-text-xxxxxxxx">
            </div>
            <div class="form-item">
              <label>Model 名称</label>
              <input type="text" class="form-input" id="inputTextModel" spellcheck="false" placeholder="例如 ep-20240604...">
            </div>
          </div>

          <div class="engine-group">
            <div class="group-header">
              <div class="group-title">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
                视觉引擎 (Image/PDF)
              </div>
              
              <div style="display:flex; align-items:center; gap:8px;">
                <span style="font-size:12px; color:#0ea5e9; font-weight:600;">本地模式</span>
                <label class="toggle-switch">
                  <input type="checkbox" id="checkUseLocalOCR">
                  <span class="slider"></span>
                </label>
              </div>
            </div>
            
            <div id="vision-settings-group">
              <div class="form-item">
                <label>Vision API 地址</label>
                <input type="text" class="form-input" id="inputVisionUrl" spellcheck="false" placeholder="同左，或独立地址">
              </div>
              <div class="form-item">
                <label>Vision API Key</label>
                <input type="password" class="form-input" id="inputVisionKey" spellcheck="false" placeholder="sk-vision-xxxxxxxx">
              </div>
              <div class="form-item">
                <label>Vision Model 名称</label>
                <input type="text" class="form-input" id="inputVisionModel" spellcheck="false" placeholder="例如 doubao-seed-1-6...">
              </div>
            </div>
          </div>
        </div>

        <div class="general-list">
          <div class="general-row">
            <span class="general-label">全局截图/呼出快捷键</span>
            <input type="text" id="inputShortcut" spellcheck="false" readonly style="width:120px; text-align:right; border:none; background:transparent; font-weight:700; color:#0ea5e9; cursor:pointer;" title="点击重新录制">
          </div>
          <div class="general-row">
            <span class="general-label">开机自动启动</span>
            <label class="toggle-switch">
              <input type="checkbox" id="checkAutoStart">
              <span class="slider"></span>
            </label>
          </div>
        </div>

      </div>
      
      <div class="modal-footer">
        <button id="btn-save-settings" class="primary-btn full-width-btn">保存所有配置</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.bootcdn.net/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script>
    if (typeof pdfjsLib !== 'undefined') {
      pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdn.bootcdn.net/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    }
  </script>
  <script src="renderer.js"></script>
</body>
</html>